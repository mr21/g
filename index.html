<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>game</title>
<link rel="stylesheet" href="game.css"/>
</head>
<body>

<div id="app" data-status="loading">
	<div id="app-sideMenu">
		<div class="app-sideMenu-row"><span>time</span><code id="app-stats-time">0</code></div>
		<div class="app-sideMenu-row"><span>waves</span><code id="app-stats-waves">0</code></div>
		<div class="app-sideMenu-row"><span>kills</span><code id="app-stats-kills">0</code></div>
		<div class="app-sideMenu-row"><span>sound</span><input id="app-gain" type="range" min="0" max="1" step=".1" value=".1" /></div>
	</div>
	<div id="app-canvasWrap">
		<canvas id="app-canvas"></canvas>
		<div id="app-canvasMenu">
			<button id="app-startBtn" type="button">Start</button>
		</div>
	</div>
</div>

<script>function lg( ...args ) { return console.log( ...args ), args[ 0 ]; }</script>
<script src="game.js"></script>
<script>
const app = document.querySelector( "#app" );
const cnv = document.querySelector( "#app-canvas" );
const gain = document.querySelector( "#app-gain" );
const startBtn = document.querySelector( "#app-startBtn" );
const nbKills = document.querySelector( "#app-stats-kills" );
const nbWaves = document.querySelector( "#app-stats-waves" );
const time = document.querySelector( "#app-stats-time" );

gain.oninput = () => GM.$volume( gain.value );
startBtn.onclick = () => {
	app.dataset.status = "playing";
	GM.$start();
};

GM.$onkill = n => nbKills.textContent = n;
GM.$onwave = n => nbWaves.textContent = n;
GM.$ontime = t => time.textContent = t | 0;
GM.$ongameover = () => app.dataset.status = "ready";

GM.$init( cnv, 620, 620 )
	.then( () => {
		app.dataset.status = "ready";
		GM.$volume( .1 );
	} );

</script>
</body>
</html>
